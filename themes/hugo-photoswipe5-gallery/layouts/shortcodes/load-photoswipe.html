<!--
Put this file in /layouts/shortcodes/load-photoswipe.html
Documentation and licence at https://github.com/thkukuk/hugo-photoswipe5-gallery/
-->

<!-- prevent this shortcode from being loaded more than once per page -->
{{ if not ($.Page.Scratch.Get "photoswipeloaded") }}
  {{ $.Page.Scratch.Set "photoswipeloaded" 1 }}

<!-- Photoswipe css/js libraries -->
<script type="module">
import PhotoSwipeLightbox from '/assets/photoswipe5/photoswipe-lightbox.esm.js';
import PhotoSwipeDynamicCaption from '/assets/photoswipe-dynamic-caption-plugin/photoswipe-dynamic-caption-plugin.esm.js';

const lightbox = new PhotoSwipeLightbox({
  gallery: '#photoswipe5-gallery',
  childSelector: '.pswp-gallery__item',
  pswpModule: () => import('/assets/photoswipe5/photoswipe.esm.js'),
  bgOpacity: 0.95,
  loop: false,
});
lightbox.init();

const captionPlugin = new PhotoSwipeDynamicCaption(lightbox, {
  // Plugins options, for example:
  type: 'auto',
});
</script>

<link rel="stylesheet" href="/assets/photoswipe5/photoswipe.css">
<link rel="stylesheet" href="/assets/photoswipe-dynamic-caption-plugin/photoswipe-dynamic-caption-plugin.css">
{{ end -}}
